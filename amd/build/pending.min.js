define("local_forum_ai/pending",["exports","core/modal_factory","core/ajax","core/notification"],(function(_exports,_modal_factory,_ajax,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modal_factory=_interopRequireDefault(_modal_factory),_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification);function renderDiscussion(data){let html="<h4>".concat(data.course," / ").concat(data.forum,"</h4>\n                <h5>Debate: ").concat(data.discussion,"</h5>");return 0===data.posts.length?html+='<p class="text-warning">No se encontraron posts en este debate.</p>':data.posts.forEach((post=>{html+=function(post){const indentationLevel=post.level,marginLeft=30*indentationLevel;let borderClass="border-left-primary";1===indentationLevel?borderClass="border-left-info":2===indentationLevel?borderClass="border-left-success":indentationLevel>=3&&(borderClass="border-left-warning");let levelIndicator="";indentationLevel>0&&(levelIndicator='<span class="badge badge-secondary mb-2">\n            '.concat("â†³ ".repeat(indentationLevel),"Respuesta nivel ").concat(indentationLevel,"\n        </span><br>"));return'\n        <div class="mb-3 p-3 border '.concat(borderClass,'" style="margin-left: ').concat(marginLeft,'px; border-left-width: 4px !important;">\n            ').concat(levelIndicator,'\n            <div class="d-flex justify-content-between align-items-start mb-2">\n                <strong class="text-primary">').concat(post.subject,'</strong>\n                <small class="text-muted">Nivel: ').concat(indentationLevel,'</small>\n            </div>\n            <div class="mb-2">\n                <em class="text-info">').concat(post.author,'</em>\n                <small class="text-muted ml-2">(').concat(post.created,')</small>\n            </div>\n            <div class="post-content">\n                ').concat(post.message,"\n            </div>\n        </div>")}(post)})),html+='<div class="alert alert-primary mt-4">\n               <h5>Respuesta AI propuesta</h5>\n               '.concat(data.airesponse,"\n             </div>"),html}_exports.init=()=>{document.querySelectorAll(".view-details").forEach((btn=>{btn.addEventListener("click",(e=>{const token=e.currentTarget.dataset.token;_ajax.default.call([{methodname:"local_forum_ai_get_details",args:{token:token}}])[0].done((data=>{_modal_factory.default.create({type:_modal_factory.default.types.DEFAULT,title:"Detalles del debate",body:renderDiscussion(data),large:!0}).done((modal=>{modal.show()}))})).fail(_notification.default.exception)}))}))}}));

//# sourceMappingURL=pending.min.js.map